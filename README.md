# Маркер — Modern UI v3.9
- Исправлен механизм тёмной темы: явный переключатель (Светлая/Тёмная), жёсткое сохранение в localStorage, авто‑применение при запуске.
- Новый набор **чистых минималистичных SVG‑иконок** для меток (без эмодзи), единый стиль.
- Остальное — как в v3.8 (пресеты карты, минимал/монохром, кастом‑зум, анти‑дубли).
- Проверка загружаемых фото: только изображения размером до 2 МБ.

## Установка

1. Установите PHP и клонируйте репозиторий.
2. Укажите URL Google Apps Script в переменной окружения `MARKER_GAS_ENDPOINT` или задайте `gas_endpoint` в `server/config.php`.
3. При необходимости задайте переменную `MARKER_ALLOWED_ORIGINS` со списком разрешённых Origin.
4. Запустите сервер, например: `php -S localhost:8000 -t server`.

## Серверное API

PHP‑прокси для Google Apps Script теперь расположен в `server/api/marker_api.php`.
Заголовок `Access-Control-Allow-Origin` больше не жёстко прописан: при отсутствии ограничений возвращается Origin клиента, либо проверяется белый список из `server/config.php` (переменная окружения `MARKER_ALLOWED_ORIGINS`).

## Тестирование

### Сброс полей модального окна

1. Запустите приложение и нажмите кнопку «+» для открытия модального окна.
2. Заполните поля «Заголовок», «Комментарий», выберите файл и измените значение «Автоистечение».
3. Закройте модальное окно кнопкой «Отмена».
4. Снова откройте модальное окно и убедитесь, что все поля очищены, а «Автоистечение» возвращено к значению по умолчанию (120 минут).
